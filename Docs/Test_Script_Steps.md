# ขั้นตอนการทำงาน (Test Script Step-by-Step) - ST-Inventory

เอกสารนี้อธิบายลำดับขั้นตอนการทำงาน (User Flow) แบ่งตามบทบาทของผู้ใช้งาน (Admin และ Customer) พร้อมระบุเส้นทาง (Path/URL) ของแต่ละหน้าจอ

## 1. บทบาท: ผู้ดูแลระบบ (Admin) - การจัดการสต็อกและคำสั่งซื้อ

| ขั้นตอนที่ | หน้าจอ/เมนู | เส้นทาง (Path) | การกระทำของผู้ใช้งาน (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | หน้าเข้าสู่ระบบ | `/login` | กรอกบัญชี Admin และรหัสผ่าน | เข้าสู่ระบบสำเร็จและไปยังหน้า Dashboard |
| 2 | เมนู Inventory | `/inventory` | คลิก "Add New Product" | ปรากฏหน้าต่างเติมข้อมูลสินค้า |
| 3 | ตารางสินค้า | `/inventory` | คลิกปุ่ม "Restock" และเพิ่มจำนวน | สต็อกอัปเดตทันที |
| 4 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | ตรวจสอบรายการสั่งซื้อใหม่ (Pending) | พบคำสั่งซื้อจากลูกค้าที่รอการอนุมัติ |
| 5 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Approve" (อนุมัติ) | สถานะคำสั่งซื้อเปลี่ยนจาก `pending` เป็น `approved` |
| 6 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Start Packing" (เริ่มบรรจุ) | สถานะเปลี่ยนจาก `paid` เป็น `packing` พร้อมไอคอนกล่องสินค้า |
| 7 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Ship Order" (จัดส่ง) | สถานะเปลี่ยนจาก `packing` เป็น `shipped` พร้อมไอคอนรถขนส่ง |

---

## 2. บทบาท: ลูกค้า (Customer) - การสั่งซื้อและการติดตามสถานะ

| ขั้นตอนที่ | หน้าจอ/เมนู | เส้นทาง (Path) | การกระทำของผู้ใช้งาน (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | หน้าเข้าสู่ระบบ | `/login` | กรอกบัญชีลูกค้า | เข้าสู่ระบบสำเร็จ |
| 2 | หน้า Shop | `/shop` | เลือกสินค้าลงตะกร้าและชำระเงิน | สินค้าถูกตัดสต็อกและเกิดคำสั่งซื้อใหม่ |
| 3 | หน้าคำสั่งซื้อ | `/orders` | ติดตามสถานะสินค้า | พบสถานะมีการอัปเดตตามที่ Admin ดำเนินการ (Packing/Shipped) |

---

## 3. ลำดับเหตุการณ์หลักแบบบูรณาการ (Complete Master Story Flow)

ตารางนี้คือ "บททดสอบหลัก" (Master Script) ที่ครอบคลุมทุกฟังก์ชันของระบบ ตั้งแต่การลงทะเบียนครั้งแรก ไปจนถึงการจัดส่งสินค้าเสร็จสิ้น

| ลำดับ | บทบาท (Role) | เส้นทาง (Path) | สิ่งที่ทำ (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | **Customer** | `/register` | ลงทะเบียนบัญชีใหม่ "Somchai User" | ระบบบันทึกผู้ใช้ใหม่และหน้าจอเปลี่ยนไปหน้า Login |
| 2 | **Customer** | `/login` | เข้าสู่ระบบด้วยบัญชีที่เพิ่งสมัคร | เข้าสู่ระบบสำเร็จและถูกพาไปยังหน้า Shop (`/shop`) |
| 3 | **Admin** | `/login` | เข้าสู่ระบบด้วยบัญชี Admin | เข้าสู่ระบบสำเร็จและถูกพาไปยังหน้า Dashboard / Inventory |
| 4 | **Admin** | `/inventory` | [Setup] เพิ่มสินค้า "Mechanical Keyboard" 10 ตัว | รายการสินค้าปรากฏในตารางคลังสินค้า |
| 5 | **Customer** | `/shop` | [Shop] เลือก "Mechanical Keyboard" 3 ตัวลงรถเข็น | ตัวเลขบนไอคอนรถเข็นแสดงเลข 3 |
| 6 | **Customer** | `/payment` | [Checkout] กรอกข้อมูลและยืนยันการชำระเงิน | **Stock ลดเหลือ 7** ทันที และเกิด Order สถานะ `paid` |
| 7 | **Admin** | `/admin/orders` | **[Approve]** ตรวจสอบยอดชำระแล้วกด Approve | สถานะยอเดอร์เปลี่ยนเป็น `approved` (สีฟ้า) |
| 8 | **Admin** | `/admin/orders` | **[Packing]** เมื่อบรรจุลงกล่อง คลิกไอคอน Packing | สถานะเปลี่ยนเป็น `packing` (สีส้ม) |
| 9 | **Customer** | `/orders` | [Tracking] ดูสถานะสินค้าของตนเอง | พบสถานะอัปเดตเป็น "กำลังบรรจุสินค้า" |
| 10 | **Admin** | `/admin/orders` | **[Delivery]** เมื่อส่งที่ขนส่งแล้ว คลิกไอคอน Truck | สถานะเปลี่ยนเป็น `shipped` (สีน้ำเงิน) ถือว่าจบขั้นตอนส่ง |
| 11 | **Customer** | `/orders` | [Receipt] ตรวจสอบสถานะการจัดส่งสุดท้าย | พบสถานะ "จัดส่งแล้ว" พร้อมวันที่จัดส่ง |
| 12 | **Admin** | `/inventory` | [Verify] ตรวจสอบยอดรวมสต็อกหลังขายสำเร็จ | ยอดสต็อก "Mechanical Keyboard" ยังคงอยู่ที่ 7 อย่างถูกต้อง |

---

## 4. สรุป Flow การทำงานหลัก (Flow Chart สรุป)

1.  **Preparation**: Admin เพิ่มสินค้าและสต็อก (`/inventory`)
2.  **Order Placement**: Customer สั่งซื้อและจ่ายเงิน -> ระบบตัดสต็อกอัตโนมัติ (`/shop` -> `/payment`)
3.  **Order Processing**: Admin ตรวจสอบคำสั่งซื้อ -> กดรับออเดอร์ -> เริ่มแพ็คสินค้า -> ส่งสินค้า (`/admin/orders`)
4.  **Tracking**: Customer ติดตามความคืบหน้าของสินค้าจนถึงมือ (`/orders`)
