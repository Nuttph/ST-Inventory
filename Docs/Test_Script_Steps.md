# ขั้นตอนการทำงาน (Test Script Step-by-Step) - ST-Inventory

เอกสารนี้อธิบายลำดับขั้นตอนการทำงาน (User Flow) แบ่งตามบทบาทของผู้ใช้งาน (Admin และ Customer) พร้อมระบุเส้นทาง (Path/URL) ของแต่ละหน้าจอ

## 1. บทบาท: ผู้ดูแลระบบ (Admin) - การจัดการสต็อกและคำสั่งซื้อ

| ขั้นตอนที่ | หน้าจอ/เมนู | เส้นทาง (Path) | การกระทำของผู้ใช้งาน (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | หน้าเข้าสู่ระบบ | `/login` | กรอกบัญชี Admin และรหัสผ่าน | เข้าสู่ระบบสำเร็จและไปยังหน้า Dashboard |
| 2 | เมนู Inventory | `/inventory` | คลิก "Add New Product" | ปรากฏหน้าต่างเติมข้อมูลสินค้า |
| 3 | ตารางสินค้า | `/inventory` | คลิกปุ่ม "Restock" และเพิ่มจำนวน | สต็อกอัปเดตทันที |
| 4 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | ตรวจสอบรายการสั่งซื้อใหม่ (Pending) | พบคำสั่งซื้อจากลูกค้าที่รอการอนุมัติ |
| 5 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Approve" (อนุมัติ) | สถานะคำสั่งซื้อเปลี่ยนจาก `pending` เป็น `approved` |
| 6 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Start Packing" (เริ่มบรรจุ) | สถานะเปลี่ยนจาก `paid` เป็น `packing` พร้อมไอคอนกล่องสินค้า |
| 7 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Ship Order" (จัดส่ง) | สถานะเปลี่ยนจาก `packing` เป็น `shipped` พร้อมไอคอนรถขนส่ง |

---

## 2. บทบาท: ลูกค้า (Customer) - การสั่งซื้อและการติดตามสถานะ

| ขั้นตอนที่ | หน้าจอ/เมนู | เส้นทาง (Path) | การกระทำของผู้ใช้งาน (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | หน้าเข้าสู่ระบบ | `/login` | กรอกบัญชีลูกค้า | เข้าสู่ระบบสำเร็จ |
| 2 | หน้า Shop | `/shop` | เลือกสินค้าลงตะกร้าและชำระเงิน | สินค้าถูกตัดสต็อกและเกิดคำสั่งซื้อใหม่ |
| 3 | หน้าคำสั่งซื้อ | `/orders` | ติดตามสถานะสินค้า | พบสถานะมีการอัปเดตตามที่ Admin ดำเนินการ (Packing/Shipped) |

---

## 3. รายลำดับเหตุการณ์การทดสอบแบบบูรณาการ (End-to-End Story Script)

ตารางนี้จำลองสถานการณ์ตั้งแต่ต้นจนจบ เพื่อให้เห็นการทำงานร่วมกันของทุกบทบาทในระบบ

| ลำดับ | บทบาท (Role) | เส้นทาง (Path) | การกระทำ (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | **Admin** | `/inventory` | เพิ่มสินค้าใหม่ "Monitor" จำนวน 5 ชิ้น | สินค้าปรากฏในสต็อกพร้อมขาย จำนวน 5 ชิ้น |
| 2 | **Customer** | `/shop` | สั่งซื้อ "Monitor" 1 ชิ้น และเลือกชำระเงิน | **Stock ลดเหลือ 4** ทันที และเกิด Order ใหม่สถานะ `pending` |
| 3 | **Admin** | `/admin/orders` | **[Approve]** ตรวจสอบออเดอร์แล้วกดปุ่ม "Approve" (ติ๊กถูก) | สถานะออเดอร์เปลี่ยนจาก `pending` เป็น `approved` |
| 4 | **System** | (Auto) | ลูกค้าดำเนินการชำระเงินสำเร็จ (หรือ Admin ยืนยันยอด) | สถานะออเดอร์เปลี่ยนเป็น `paid` (ชำระเงินแล้ว) |
| 5 | **Admin** | `/admin/orders` | **[Packing]** คลิกปุ่มไอคอนกล่องสินค้า "Start Packing" | สถานะเปลี่ยนเป็น `packing` (ฝั่งลูกค้าจะเห็นว่ากำลังแพ็คของ) |
| 6 | **Customer** | `/orders` | ตรวจสอบสถานะการสั่งซื้อในหน้า My Orders | ลูกค้าเห็นสถานะอัปเดตเป็น "กำลังบรรจุสินค้า" (`packing`) |
| 7 | **Admin** | `/admin/orders` | **[Delivery]** คลิกปุ่มไอคอนรถบรรทุก "Ship Order" | สถานะเปลี่ยนเป็น `shipped` (จัดส่งแล้ว) และระบุวันที่ส่ง |
| 8 | **Customer** | `/orders` | ตรวจสอบสถานะการสั่งซื้อครั้งสุดท้าย | ลูกค้าเห็นสถานะ "จัดส่งแล้ว" (`shipped`) พร้อมเลขติดตามพัสดุ |
| 9 | **Admin** | `/inventory` | ตรวจสอบความถูกต้องของสต็อกหลังปิดการขาย | สินค้า "Monitor" ยังคงมีสต็อกคงเหลือ 4 ชิ้น (ถูกต้องแม่นยำ) |

---

## 4. สรุป Flow การทำงานหลัก (Flow Chart สรุป)

1.  **Preparation**: Admin เพิ่มสินค้าและสต็อก (`/inventory`)
2.  **Order Placement**: Customer สั่งซื้อและจ่ายเงิน -> ระบบตัดสต็อกอัตโนมัติ (`/shop` -> `/payment`)
3.  **Order Processing**: Admin ตรวจสอบคำสั่งซื้อ -> กดรับออเดอร์ -> เริ่มแพ็คสินค้า -> ส่งสินค้า (`/admin/orders`)
4.  **Tracking**: Customer ติดตามความคืบหน้าของสินค้าจนถึงมือ (`/orders`)
