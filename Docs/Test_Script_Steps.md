# ขั้นตอนการทำงาน (Test Script Step-by-Step) - ST-Inventory

เอกสารนี้อธิบายลำดับขั้นตอนการทำงาน (User Flow) แบ่งตามบทบาทของผู้ใช้งาน (Admin และ Customer) พร้อมระบุเส้นทาง (Path/URL) ของแต่ละหน้าจอ

## 1. บทบาท: ผู้ดูแลระบบ (Admin) - การจัดการสต็อกและคำสั่งซื้อ

| ขั้นตอนที่ | หน้าจอ/เมนู | เส้นทาง (Path) | การกระทำของผู้ใช้งาน (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | หน้าเข้าสู่ระบบ | `/login` | กรอกบัญชี Admin และรหัสผ่าน | เข้าสู่ระบบสำเร็จและไปยังหน้า Dashboard |
| 2 | เมนู Inventory | `/inventory` | คลิก "Add New Product" | ปรากฏหน้าต่างเติมข้อมูลสินค้า |
| 3 | ตารางสินค้า | `/inventory` | คลิกปุ่ม "Restock" และเพิ่มจำนวน | สต็อกอัปเดตทันที |
| 4 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | ตรวจสอบรายการสั่งซื้อใหม่ (Pending) | พบคำสั่งซื้อจากลูกค้าที่รอการอนุมัติ |
| 5 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Approve" (อนุมัติ) | สถานะคำสั่งซื้อเปลี่ยนจาก `pending` เป็น `approved` |
| 6 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Start Packing" (เริ่มบรรจุ) | สถานะเปลี่ยนจาก `paid` เป็น `packing` พร้อมไอคอนกล่องสินค้า |
| 7 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | คลิกปุ่ม "Ship Order" (จัดส่ง) | สถานะเปลี่ยนจาก `packing` เป็น `shipped` พร้อมไอคอนรถขนส่ง |

---

## 2. บทบาท: ลูกค้า (Customer) - การสั่งซื้อและการติดตามสถานะ

| ขั้นตอนที่ | หน้าจอ/เมนู | เส้นทาง (Path) | การกระทำของผู้ใช้งาน (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | หน้าเข้าสู่ระบบ | `/login` | กรอกบัญชีลูกค้า | เข้าสู่ระบบสำเร็จ |
| 2 | หน้า Shop | `/shop` | เลือกสินค้าลงตะกร้าและชำระเงิน | สินค้าถูกตัดสต็อกและเกิดคำสั่งซื้อใหม่ |
| 3 | หน้าคำสั่งซื้อ | `/orders` | ติดตามสถานะสินค้า | พบสถานะมีการอัปเดตตามที่ Admin ดำเนินการ (Packing/Shipped) |

---

## 3. รายลำดับเหตุการณ์การทดสอบแบบบูรณาการ (End-to-End Story Script)

| ลำดับ | บทบาท (Role) | เส้นทาง (Path) | การกระทำ (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | **Admin** | `/inventory` | เพิ่มสินค้า "Monitor" จำนวน 5 ชิ้น | สินค้าพร้อมขายในระบบ |
| 2 | **Customer** | `/shop` | สั่งซื้อ "Monitor" 1 ชิ้น และชำระเงินสำเร็จ | ระบบหักสต็อกเหลือ 4 และสร้าง Order สถานะ `paid` |
| 3 | **Admin** | `/admin/orders` | ตรวจสอบ Order และคลิก **"Start Packing"** | สถานะเปลี่ยนเป็น `packing` (กำลังแพ็คสินค้า) |
| 4 | **Customer** | `/orders` | รีเฟรชหน้าจอเพื่อดูสถานะล่าสุด | พบว่าสินค้ากำลังถูกบรรจุ (`packing`) |
| 5 | **Admin** | `/admin/orders` | เมื่อแพ็คเสร็จ คลิกปุ่ม **"Ship Order"** | สถานะเปลี่ยนเป็น `shipped` (ส่งสินค้าแล้ว) |
| 6 | **Customer** | `/orders` | ตรวจสอบสถานะการจัดส่ง | พบสถานะสินค้าเป็น "จัดส่งแล้ว" (`shipped`) พร้อมวันที่ส่ง |
| 7 | **Admin** | `/inventory` | ตรวจสอบสต็อกสินค้า "Monitor" | สต็อกยังคงคงเหลือ 4 ชิ้น (ถูกต้องตามที่มีการสั่งซื้อ) |

---

## 4. สรุป Flow การทำงานหลัก (Flow Chart สรุป)

1.  **Preparation**: Admin เพิ่มสินค้าและสต็อก (`/inventory`)
2.  **Order Placement**: Customer สั่งซื้อและจ่ายเงิน -> ระบบตัดสต็อกอัตโนมัติ (`/shop` -> `/payment`)
3.  **Order Processing**: Admin ตรวจสอบคำสั่งซื้อ -> กดรับออเดอร์ -> เริ่มแพ็คสินค้า -> ส่งสินค้า (`/admin/orders`)
4.  **Tracking**: Customer ติดตามความคืบหน้าของสินค้าจนถึงมือ (`/orders`)
