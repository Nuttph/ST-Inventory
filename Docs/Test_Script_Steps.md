# ขั้นตอนการทำงาน (Test Script Step-by-Step) - ST-Inventory

เอกสารนี้อธิบายลำดับขั้นตอนการทำงาน (User Flow) แบ่งตามบทบาทของผู้ใช้งาน (Admin และ Customer) พร้อมระบุเส้นทาง (Path/URL) ของแต่ละหน้าจอ

## 1. บทบาท: ผู้ดูแลระบบ (Admin) - การจัดการสต็อกและคำสั่งซื้อ

| ขั้นตอนที่ | หน้าจอ/เมนู | เส้นทาง (Path) | สิ่งที่ทำ (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | หน้าเข้าสู่ระบบ | `/login` | เข้าสู่ระบบด้วยบัญชีผู้ดูแลระบบ | เข้าสู่ระบบสำเร็จและไปยังหน้า Dashboard |
| 2 | เมนู Inventory | `/inventory` | คลิก "Add New Product" และกรอกข้อมูล | รายการสินค้าใหม่ปรากฏในตารางคลังสินค้า |
| 3 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | ตรวจสอบออเดอร์และกด "Approve" | สถานะเปลี่ยนจาก `pending` เป็น `approved` |
| 4 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | กดไอคอนกล่องเพื่อเริ่มแพ็คสินค้า | สถานะเปลี่ยนจาก `paid` เป็น `packing` |
| 5 | หน้าจัดการคำสั่งซื้อ | `/admin/orders` | กดไอคอนรถบรรทุกเมื่อส่งสินค้าแล้ว | สถานะเปลี่ยนจาก `packing` เป็น `shipped` |

---

## 2. บทบาท: ลูกค้า (Customer) - การสั่งซื้อและการติดตามสถานะ

| ขั้นตอนที่ | หน้าจอ/เมนู | เส้นทาง (Path) | สิ่งที่ทำ (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | หน้าลงทะเบียน | `/register` | สมัครสมาชิกใหม่ | ระบบบันทึกข้อมูลและนำไปหน้า Login |
| 2 | หน้าลงรถเข็น | `/shop` | เลือกสินค้าและจำนวนที่ต้องการ | สินค้าถูกเพิ่มลงในรถเข็น (Badge อัปเดต) |
| 3 | หน้าชำระเงิน | `/payment` | ยืนยันการสั่งซื้อและชำระเงิน | **สต็อกลดลงทันที** และเกิดคำสั่งซื้อใหม่ |
| 4 | หน้าคำสั่งซื้อ | `/orders` | ตรวจสอบสถานะการจัดส่ง | เห็นสถานะการอัปเดตจาก Admin (Packing/Shipped) |

---

## 3. ลำดับเหตุการณ์หลักแบบบูรณาการ (Complete Master Story Flow)

เรียงลำดับเหตุการณ์ตามความเป็นจริง (Admin เตรียมของ -> Customer สมัครสมาชิกและซื้อ -> Admin จัดส่ง)

| ลำดับ | บทบาท (Role) | เส้นทาง (Path) | สิ่งที่ทำ (Action) | ผลลัพธ์ที่คาดหวัง (Expected Result) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | **Admin** | `/login` | เข้าสู่ระบบ Admin | เข้าสู่ระบบสำเร็จ |
| 2 | **Admin** | `/inventory` | **[Setup]** เพิ่มสินค้า "Monitor" 10 ชิ้น | สินค้าพร้อมขายในระบบ |
| 3 | **Customer** | `/register` | **[Register]** สมัครสมาชิกใหม่ | บัญชีใหม่ถูกสร้างสำเร็จ |
| 4 | **Customer** | `/login` | **[Login]** เข้าสู่ระบบ Customer | เข้าหน้า Shop ได้ |
| 5 | **Customer** | `/shop` | **[Order]** สั่งซื้อ "Monitor" 2 ชิ้น | เลขในรถเข็นอัปเดต |
| 6 | **Customer** | `/payment` | **[Payment]** ยืนยันชำระเงิน | **Stock ลดเหลือ 8** และ Order ขึ้นสถานะ `paid` |
| 7 | **Admin** | `/admin/orders` | **[Process]** อนุมัติและเริ่มบรรจุสินค้า | สถานะเปลี่ยนเป็น `approved` -> `packing` |
| 8 | **Admin** | `/admin/orders` | **[Ship]** ทำการจัดส่งสินค้า | สถานะเปลี่ยนเป็น `shipped` |
| 9 | **Customer** | `/orders` | **[Track]** ตรวจสอบสถานะว่าส่งหรือยัง | พบสถานะ "จัดส่งแล้ว" |
| 10 | **Admin** | `/inventory` | **[Verify]** ตรวจสอบยอดสต็อกสุดท้าย | ยอดสต็อกเหลือ 8 ชิ้น ถูกต้องตามรายการซื้อ |

---

## 4. รายละเอียดขั้นตอนแยกตามหน้าจอ (Screen-by-Screen Test Script)

### 4.1 หน้าเข้าสู่ระบบและลงทะเบียน (Login & Register - `/login`, `/register`)
| บทบาท | การกระทำ | ผลลัพธ์ที่คาดหวัง |
| :--- | :--- | :--- |
| **Customer** | กรอกข้อมูลสมัครสมาชิกใหม่ | บันทึกข้อมูลสำเร็จและ Redirect ไปหน้า Login |
| **Admin/User**| กรอกรหัสผ่านเพื่อเข้าใช้งาน | เข้าสู่หน้าเมนูหลักตามสิทธิ์ของ Role |

### 4.2 หน้าจัดการคลังสินค้า (Inventory - `/inventory`)
| บทบาท | การกระทำ | ผลลัพธ์ที่คาดหวัง |
| :--- | :--- | :--- |
| **Admin** | คลิกปุ่ม "Add Product" และใส่ข้อมูล | สินค้าใหม่เด้งขึ้นมาในตาราง |
| **Admin** | คลิกปุ่ม "Edit" เพื่อแก้ราคาหรือชื่อ | ข้อมูลในตารางเปลี่ยนตามที่แก้ไข |
| **Admin** | คลิกปุ่ม "Restock" เพื่อเติมจำนวน | ตัวเลขสต็อกเพิ่มขึ้นทันที |
| **Admin** | คลิกปุ่ม "Delete" สินค้า | แถวสินค้านั้นหายไปจากตาราง |

### 4.3 หน้าเลือกซื้อสินค้า (Shop - `/shop`)
| บทบาท | การกระทำ | ผลลัพธ์ที่คาดหวัง |
| :--- | :--- | :--- |
| **Customer** | คลิก "Add to Cart" | มีการแจ้งเตือนว่าเพิ่มสินค้าแล้ว และเลขตะกร้าเพิ่มขึ้น |
| **Customer** | ค้นหาชื่อสินค้าในช่อง Search | ตาราง/การ์ดสินค้าแสดงเฉพาะผลลัพธ์ที่ตรงกัน |

### 4.4 หน้าจัดการคำสั่งซื้อ (Order Management - `/admin/orders`, `/orders`)
| บทบาท | การกระทำ | ผลลัพธ์ที่คาดหวัง |
| :--- | :--- | :--- |
| **Admin** | กดปุ่ม "Approve" ออเดอร์ใหม่ | สถานะเปลี่ยนเป็นสีฟ้า (`approved`) |
| **Admin** | กดไอคอนกล่องสินค้า | สถานะเปลี่ยนเป็นสีส้ม (`packing`) |
| **Admin** | กดไอคอนรถบรรทุก | สถานะเปลี่ยนเป็นสีน้ำเงิน (`shipped`) |
| **Customer** | ดูรายการในหน้า My Orders | เห็นประวัติการซื้อและสถานะปัจจุบันที่ Admin อัปเดต |

---

## 5. สรุป Flow การทำงานหลัก
1. **Admin** เตรียมสินค้า (`/inventory`)
2. **Customer** สมัครสมาชิกและซื้อสินค้า (`/register` -> `/shop` -> `/payment`)
3. **Admin** อนุมัติและจัดส่ง (`/admin/orders`)
4. **Customer** ตรวจสอบผลลัพธ์ (`/orders`)
